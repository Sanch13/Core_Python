"""
Adapter (–ê–¥–∞–ø—Ç–µ—Ä) ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç–∞–º —Å
–Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ. –ê–¥–∞–ø—Ç–µ—Ä –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –æ–¥–∏–Ω –∏–∑ –æ–±—ä–µ–∫—Ç–æ–≤ –∏
–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–æ–Ω—è—Ç–Ω—ã–π –¥—Ä—É–≥–æ–º—É –æ–±—ä–µ–∫—Ç—É.
–ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏:
–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –µ–≤—Ä–æ–ø–µ–π—Å–∫–∞—è –≤–∏–ª–∫–∞ (–¥–≤–∞ –∫—Ä—É–≥–ª—ã—Ö —à—Ç—ã—Ä—å–∫–∞), –∞ —Ä–æ–∑–µ—Ç–∫–∞ –≤ –æ—Ç–µ–ª–µ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∞—è
(–¥–≤–∞ –ø–ª–æ—Å–∫–∏—Ö). –¢—ã –ø–æ–∫—É–ø–∞–µ—à—å –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫-–∞–¥–∞–ø—Ç–µ—Ä: –≤—Å—Ç–∞–≤–ª—è–µ—à—å –≤ –Ω–µ–≥–æ –µ–≤—Ä–æ–ø–µ–π—Å–∫—É—é –≤–∏–ª–∫—É, –∞ —Å–∞–º
–∞–¥–∞–ø—Ç–µ—Ä –≤—Å—Ç–∞–≤–ª—è–µ—à—å –≤ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫—É—é —Ä–æ–∑–µ—Ç–∫—É. –ê–¥–∞–ø—Ç–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –¥—Ä—É–≥–æ–π, –Ω–µ –º–µ–Ω—è—è
—Å—É—Ç—å —Ä–∞–±–æ—Ç—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

–î–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞
‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äî –æ—Ç–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏ ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏/–ª–µ–≥–∞—Å–∏-–∫–æ–¥ –±–µ–∑ –∏—Ö –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è
‚úÖ –ì–∏–±–∫–æ—Å—Ç—å ‚Äî –º–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –∫ –æ–¥–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
‚ö†Ô∏è –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–ª–∏—à–Ω–∏–º ‚Äî –µ—Å–ª–∏ –ø—Ä–æ—â–µ –∏–∑–º–µ–Ω–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞–ø—Ä—è–º—É—é (–µ—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É)

–ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ
üîπ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ ‚Äî –∫–æ–≥–¥–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º–µ–µ—Ç –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ç–≤–æ–∏–º –∫–æ–¥–æ–º
üîπ –†–∞–±–æ—Ç–∞ —Å legacy-–∫–æ–¥–æ–º ‚Äî –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ –ø–æ–¥ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
üîπ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–∑–Ω—ã—Ö API ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–ª–∞—Ç—ë–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
üîπ –ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ ‚Äî –∫–æ–≥–¥–∞ API –∏–∑–º–µ–Ω–∏–ª—Å—è, –Ω–æ —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
"""


# –¶–µ–ª–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–µ—Ç –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
class PaymentProcessor:
	"""–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π"""

	def process_payment(self, amount: float) -> str:
		raise NotImplementedError


# –°—Ç–æ—Ä–æ–Ω–Ω–∏–π –∫–ª–∞—Å—Å Stripe (–Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
class StripePayment:
	"""–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Stripe —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º API"""

	def make_stripe_payment(self, cents: int) -> dict:
		return {
			"status": "success",
			"transaction_id": "stripe_12345",
			"amount_cents": cents
		}


# –°—Ç–æ—Ä–æ–Ω–Ω–∏–π –∫–ª–∞—Å—Å PayPal (–¥—Ä—É–≥–æ–π –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
class PayPalPayment:
	"""–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ PayPal —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º API"""

	def send_paypal_payment(self, dollars: float, currency: str) -> bool:
		print(f"PayPal: Sending {dollars} {currency}")
		return True


# –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è Stripe
class StripeAdapter(PaymentProcessor):
	"""–ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç Stripe API –∫ –Ω–∞—à–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É"""

	def __init__(self):
		self.stripe = StripePayment()

	def process_payment(self, amount: float) -> str:
		# –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –¥–æ–ª–ª–∞—Ä—ã –≤ —Ü–µ–Ω—Ç—ã (Stripe —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ü–µ–Ω—Ç–∞–º–∏)
		cents = int(amount * 100)
		result = self.stripe.make_stripe_payment(cents)
		return f"Stripe payment: {result['status']}, ID: {result['transaction_id']}"


# –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è PayPal
class PayPalAdapter(PaymentProcessor):
	"""–ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç PayPal API –∫ –Ω–∞—à–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É"""

	def __init__(self):
		self.paypal = PayPalPayment()

	def process_payment(self, amount: float) -> str:
		success = self.paypal.send_paypal_payment(amount, "USD")
		if success:
			return f"PayPal payment: success, Amount: ${amount}"
		return "PayPal payment: failed"


# –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –µ–¥–∏–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
def checkout(processor: PaymentProcessor, amount: float):
	"""–§—É–Ω–∫—Ü–∏—è –Ω–µ –∑–Ω–∞–µ—Ç –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º"""
	print(f"\nProcessing payment of ${amount}...")
	result = processor.process_payment(amount)
	print(f"Result: {result}")


# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if __name__ == "__main__":
	# –ö–ª–∏–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
	stripe_processor = StripeAdapter()
	paypal_processor = PayPalAdapter()

	checkout(stripe_processor, 99.99)
	checkout(paypal_processor, 149.50)

